{
  "flowchart-app-state": {
    "state": {
      "items": [
        {
          "id": "workspace-language-learning",
          "title": "Language Learning Template",
          "description": "A Duolingo-like language learning app template",
          "slug": "language-learning",
          "createdAt": 1711984800000,
          "updatedAt": 1711984800000,
          "children": [
            {
              "id": "scenario-dashboard",
              "name": "Dashboard",
              "description": "Main dashboard showing units and progress",
              "createdAt": 1711984800000,
              "updatedAt": 1711984800000,
              "children": [
                {
                  "id": "node-dashboard-main",
                  "name": "Dashboard View",
                  "description": "Display available units",
                  "type": "LanguageDashboard",
                  "data": {
                    "title": "Learn Spanish",
                    "subtitle": "Track your progress and continue learning",
                    "configKey": "app_config",
                    "unitsDataKey": "current_learning_state"
                  },
                  "position": { "x": 250, "y": 100 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-unit-select",
                  "name": "Select Unit",
                  "description": "Redirects to selected unit scenario",
                  "type": "ScenarioRedirector",
                  "data": {
                    "targetScenarios": {
                      "unit-1": "scenario-unit-1",
                      "unit-2": "scenario-unit-2",
                      "unit-3": "scenario-unit-3"
                    },
                    "contextKeyToCheck": "selected_unit",
                    "defaultScenarioId": "scenario-unit-1"
                  },
                  "position": { "x": 250, "y": 250 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                }
              ],
              "edges": [
                {
                  "id": "edge-dashboard-to-select",
                  "source": "node-dashboard-main",
                  "target": "node-unit-select",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Unit Selected"
                  }
                }
              ],
              "filters": []
            },
            {
              "id": "scenario-unit-1",
              "name": "Unit 1 - Basics",
              "description": "Basic Spanish words and phrases",
              "createdAt": 1711984800000,
              "updatedAt": 1711984800000,
              "children": [
                {
                  "id": "node-unit-1-intro",
                  "name": "Unit Introduction",
                  "description": "Introduction to Unit 1",
                  "type": "ContentDisplay",
                  "data": {
                    "title": "Unit 1 - Basics",
                    "subtitle": "Learn essential Spanish words and phrases",
                    "content": "This unit will teach you the basics of Spanish language including greetings, common phrases, and simple vocabulary.",
                    "imageUrl": "",
                    "nextButtonText": "Start Learning"
                  },
                  "position": { "x": 250, "y": 100 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-lesson-loader",
                  "name": "Lesson Loader",
                  "description": "Loads current lesson from IndexedDB",
                  "type": "DataLoader",
                  "data": {
                    "contextKey": "current_lesson",
                    "sourceType": "indexedDB",
                    "collection": "lessons",
                    "query": { "unit_id": "unit-1", "lesson_id": "${current_lesson_id}" },
                    "fallbackValue": { "not_found": true }
                  },
                  "position": { "x": 250, "y": 200 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-exercise-flow-builder",
                  "name": "Exercise Flow Builder",
                  "description": "Builds exercise flow based on lesson data",
                  "type": "FlowBuilder",
                  "data": {
                    "inputContextKey": "current_lesson",
                    "exerciseLoaderNodeId": "node-exercise-loader",
                    "exerciseCompletionNodeId": "node-exercise-completed",
                    "progressTrackingKey": "lesson_progress"
                  },
                  "position": { "x": 250, "y": 300 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-exercise-loader",
                  "name": "Exercise Loader",
                  "description": "Loads exercise data",
                  "type": "ExerciseRenderer",
                  "data": {
                    "exerciseDataKey": "current_exercise",
                    "progressKey": "exercise_progress",
                    "feedbackKey": "exercise_feedback",
                    "templates": {
                      "multiple_choice": "MultipleChoiceExercise",
                      "translation": "TranslationExercise",
                      "matching": "MatchingExercise",
                      "fill_blank": "FillInBlankExercise"
                    }
                  },
                  "position": { "x": 250, "y": 400 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-exercise-completed",
                  "name": "Exercise Completed",
                  "description": "Handles exercise completion",
                  "type": "ProgressTracker",
                  "data": {
                    "trackingKey": "user_progress",
                    "storagePath": "indexedDB",
                    "collection": "user_progress",
                    "completionMessage": "Well done! Exercise completed.",
                    "nextAction": "next_exercise"
                  },
                  "position": { "x": 250, "y": 500 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-lesson-completed",
                  "name": "Lesson Completed",
                  "description": "Handles lesson completion",
                  "type": "LessonComplete",
                  "data": {
                    "congratsMessage": "Congratulations! You've completed this lesson.",
                    "nextLessonAction": "load_next_lesson",
                    "dashboardAction": "return_to_dashboard",
                    "progressUpdateCollection": "user_progress"
                  },
                  "position": { "x": 250, "y": 600 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-return-dashboard",
                  "name": "Return to Dashboard",
                  "description": "Returns to the main dashboard",
                  "type": "ScenarioRedirector",
                  "data": {
                    "targetScenarioId": "scenario-dashboard",
                    "clearContext": ["current_lesson", "current_exercise"]
                  },
                  "position": { "x": 250, "y": 700 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                }
              ],
              "edges": [
                {
                  "id": "edge-intro-to-loader",
                  "source": "node-unit-1-intro",
                  "target": "node-lesson-loader", 
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Start"
                  }
                },
                {
                  "id": "edge-loader-to-flow-builder",
                  "source": "node-lesson-loader",
                  "target": "node-exercise-flow-builder",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Lesson Loaded"
                  }
                },
                {
                  "id": "edge-flow-builder-to-exercise",
                  "source": "node-exercise-flow-builder", 
                  "target": "node-exercise-loader",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Exercise Ready"
                  }
                },
                {
                  "id": "edge-exercise-to-completed",
                  "source": "node-exercise-loader",
                  "target": "node-exercise-completed",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Exercise Done"
                  }
                },
                {
                  "id": "edge-completed-to-lesson-completed",
                  "source": "node-exercise-completed",
                  "target": "node-lesson-completed",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "condition": "all_exercises_completed",
                    "label": "All Done"
                  }
                },
                {
                  "id": "edge-completed-to-next-exercise",
                  "source": "node-exercise-completed",
                  "target": "node-exercise-loader",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "condition": "has_more_exercises",
                    "label": "Next Exercise"
                  }
                },
                {
                  "id": "edge-lesson-to-dashboard",
                  "source": "node-lesson-completed",
                  "target": "node-return-dashboard",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Back to Dashboard"
                  }
                }
              ],
              "filters": [
                {
                  "id": "filter-unit1-active",
                  "name": "Unit 1 Active",
                  "contextKey": "app_config",
                  "operator": "JSON_PATH",
                  "value": "$.available_units[?(@.id==\"unit-1\" && @.active==true)]",
                  "enabled": true,
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                }
              ]
            },
            {
              "id": "scenario-unit-2",
              "name": "Unit 2 - Phrases",
              "description": "Common Spanish phrases",
              "createdAt": 1711984800000,
              "updatedAt": 1711984800000,
              "children": [
                {
                  "id": "node-unit-2-locked",
                  "name": "Unit Locked",
                  "description": "Shows locked unit message",
                  "type": "ContentDisplay",
                  "data": {
                    "title": "Unit 2 - Not Available Yet",
                    "subtitle": "Complete Unit 1 first",
                    "content": "You need to complete Unit 1 before accessing this content.",
                    "imageUrl": "",
                    "nextButtonText": "Back to Dashboard"
                  },
                  "position": { "x": 250, "y": 100 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                },
                {
                  "id": "node-return-dashboard-2",
                  "name": "Return to Dashboard",
                  "description": "Returns to main dashboard",
                  "type": "ScenarioRedirector",
                  "data": {
                    "targetScenarioId": "scenario-dashboard"
                  },
                  "position": { "x": 250, "y": 200 },
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                }
              ],
              "edges": [
                {
                  "id": "edge-locked-to-return",
                  "source": "node-unit-2-locked",
                  "target": "node-return-dashboard-2",
                  "type": "custom",
                  "animated": true,
                  "data": {
                    "label": "Return"
                  }
                }
              ],
              "filters": [
                {
                  "id": "filter-unit2-locked",
                  "name": "Unit 2 Locked",
                  "contextKey": "app_config",
                  "operator": "JSON_PATH",
                  "value": "$.available_units[?(@.id==\"unit-2\" && @.active==false)]",
                  "enabled": true,
                  "createdAt": 1711984800000,
                  "updatedAt": 1711984800000
                }
              ]
            }
          ]
        }
      ],
      "selected": {
        "workspace": "workspace-language-learning",
        "scenario": "scenario-dashboard",
        "node": ""
      },
      "stateVersion": 1,
      "flowSession": {
        "isPlaying": false,
        "currentStepIndex": 0,
        "temporarySteps": []
      }
    },
    "version": 1
  },
  "indexed_db": {
    "collections": [
      {
        "name": "app_config",
        "items": [
          {
            "id": "config",
            "app_name": "Spanish Learning App",
            "app_version": "1.0.0",
            "available_units": [
              {
                "id": "unit-1",
                "title": "Basics",
                "description": "Learn essential Spanish words and phrases",
                "icon": "📚",
                "lessons_count": 3,
                "active": true,
                "progress": 0
              },
              {
                "id": "unit-2",
                "title": "Phrases",
                "description": "Common Spanish phrases and expressions",
                "icon": "💬",
                "lessons_count": 3,
                "active": false,
                "progress": 0
              },
              {
                "id": "unit-3",
                "title": "Grammar",
                "description": "Basic Spanish grammar rules",
                "icon": "📝",
                "lessons_count": 4,
                "active": false,
                "progress": 0
              }
            ]
          }
        ]
      },
      {
        "name": "lessons",
        "items": [
          {
            "id": "lesson-1-1",
            "unit_id": "unit-1",
            "lesson_id": "lesson-1",
            "title": "Greetings",
            "description": "Basic Spanish greetings",
            "exercises": [
              {
                "id": "ex-1-1-1",
                "type": "multiple_choice",
                "question": "How do you say 'hello' in Spanish?",
                "options": [
                  "Hola", 
                  "Adiós", 
                  "Gracias", 
                  "Por favor"
                ],
                "correct_answer": 0,
                "explanation": "'Hola' means 'hello' in Spanish."
              },
              {
                "id": "ex-1-1-2",
                "type": "multiple_choice",
                "question": "How do you say 'goodbye' in Spanish?",
                "options": [
                  "Hola", 
                  "Adiós", 
                  "Gracias", 
                  "Por favor"
                ],
                "correct_answer": 1,
                "explanation": "'Adiós' means 'goodbye' in Spanish."
              },
              {
                "id": "ex-1-1-3",
                "type": "translation",
                "question": "Translate: 'Good morning'",
                "answer": "Buenos días",
                "alternatives": ["Buen día", "Buenos diaz"],
                "explanation": "'Buenos días' means 'Good morning' in Spanish."
              }
            ]
          },
          {
            "id": "lesson-1-2",
            "unit_id": "unit-1",
            "lesson_id": "lesson-2",
            "title": "Simple Phrases",
            "description": "Learn simple Spanish phrases",
            "exercises": [
              {
                "id": "ex-1-2-1",
                "type": "multiple_choice",
                "question": "How do you say 'thank you' in Spanish?",
                "options": [
                  "Hola", 
                  "Adiós", 
                  "Gracias", 
                  "Por favor"
                ],
                "correct_answer": 2,
                "explanation": "'Gracias' means 'thank you' in Spanish."
              },
              {
                "id": "ex-1-2-2",
                "type": "multiple_choice",
                "question": "How do you say 'please' in Spanish?",
                "options": [
                  "Hola", 
                  "Adiós", 
                  "Gracias", 
                  "Por favor"
                ],
                "correct_answer": 3,
                "explanation": "'Por favor' means 'please' in Spanish."
              },
              {
                "id": "ex-1-2-3",
                "type": "fill_blank",
                "question": "__________ días (Good morning)",
                "answer": "Buenos",
                "explanation": "'Buenos días' means 'Good morning' in Spanish."
              }
            ]
          },
          {
            "id": "lesson-1-3",
            "unit_id": "unit-1",
            "lesson_id": "lesson-3",
            "title": "Basic Questions",
            "description": "Learn to ask basic questions in Spanish",
            "exercises": [
              {
                "id": "ex-1-3-1",
                "type": "translation",
                "question": "Translate: 'What is your name?'",
                "answer": "¿Cómo te llamas?",
                "alternatives": ["¿Cuál es tu nombre?"],
                "explanation": "'¿Cómo te llamas?' is how you ask 'What is your name?' in Spanish."
              },
              {
                "id": "ex-1-3-2",
                "type": "multiple_choice",
                "question": "How do you ask 'How are you?' in Spanish?",
                "options": [
                  "¿Cómo estás?", 
                  "¿Dónde estás?", 
                  "¿Quién eres?", 
                  "¿Qué haces?"
                ],
                "correct_answer": 0,
                "explanation": "'¿Cómo estás?' means 'How are you?' in Spanish."
              },
              {
                "id": "ex-1-3-3",
                "type": "matching",
                "question": "Match the Spanish phrases with their English meanings:",
                "pairs": [
                  {"left": "¿Cómo te llamas?", "right": "What is your name?"},
                  {"left": "¿Dónde vives?", "right": "Where do you live?"},
                  {"left": "¿Cuántos años tienes?", "right": "How old are you?"}
                ],
                "explanation": "These are common questions in Spanish."
              }
            ]
          }
        ]
      },
      {
        "name": "user_progress",
        "items": [
          {
            "id": "new_user",
            "user_id": "default",
            "display_name": "Learner",
            "completed_lessons": [],
            "completed_units": [],
            "current_streak": 0,
            "last_activity": "",
            "xp_points": 0,
            "level": 1
          }
        ]
      },
      {
        "name": "current_learning_state",
        "items": [
          {
            "id": "current_state",
            "current_unit_id": "unit-1",
            "current_lesson_id": "lesson-1",
            "current_exercise_index": 0,
            "unit_progress": {
              "unit-1": {
                "completed_lessons": [],
                "total_correct": 0,
                "total_attempts": 0
              }
            }
          }
        ]
      }
    ]
  },
  "context_items": [
    {
      "title": "app_config",
      "type": "INDEXED_DB",
      "content": "app_config",
      "persistent": true
    },
    {
      "title": "current_learning_state",
      "type": "INDEXED_DB",
      "content": "current_learning_state",
      "persistent": true
    },
    {
      "title": "selected_unit",
      "type": "TEXT",
      "content": "unit-1",
      "persistent": true
    },
    {
      "title": "current_lesson_id",
      "type": "TEXT",
      "content": "lesson-1",
      "persistent": true
    },
    {
      "title": "current_lesson",
      "type": "JSON",
      "content": "{}",
      "persistent": false
    },
    {
      "title": "current_exercise",
      "type": "JSON",
      "content": "{}",
      "persistent": false
    },
    {
      "title": "exercise_progress",
      "type": "JSON",
      "content": "{ \"current_index\": 0, \"total\": 0, \"correct\": 0 }",
      "persistent": false
    },
    {
      "title": "exercise_feedback",
      "type": "JSON",
      "content": "{ \"status\": \"\", \"message\": \"\" }",
      "persistent": false
    }
  ],
  "custom_components": [
    {
      "name": "LanguageDashboard",
      "template": "alternative",
      "description": "Displays language learning units and progress",
      "template_data": {
        "header": {
          "logo_url": "https://via.placeholder.com/50",
          "show_progress": true,
          "show_settings": true
        },
        "styles": {
          "background_color": "#f8f9fa",
          "primary_color": "#28a745",
          "text_color": "#212529",
          "border_radius": "8px",
          "shadow": "0 4px 6px rgba(0,0,0,0.1)"
        }
      }
    },
    {
      "name": "MultipleChoiceExercise",
      "template": "alternative",
      "description": "Multiple choice question exercise",
      "template_data": {
        "header": {
          "show_progress": true,
          "show_lives": true
        },
        "feedback": {
          "show_immediate": true,
          "correct_sound": "success.mp3",
          "incorrect_sound": "error.mp3"
        }
      }
    },
    {
      "name": "TranslationExercise",
      "template": "alternative",
      "description": "Translation question exercise",
      "template_data": {
        "header": {
          "show_progress": true,
          "show_lives": true
        },
        "input": {
          "placeholder": "Type your answer here...",
          "check_button_text": "Check"
        }
      }
    },
    {
      "name": "MatchingExercise",
      "template": "alternative",
      "description": "Matching pairs exercise",
      "template_data": {
        "header": {
          "show_progress": true,
          "show_lives": false
        },
        "matching": {
          "shuffle_items": true,
          "highlight_matched": true
        }
      }
    },
    {
      "name": "FillInBlankExercise",
      "template": "alternative",
      "description": "Fill in the blank exercise",
      "template_data": {
        "header": {
          "show_progress": true,
          "show_lives": true
        },
        "input": {
          "placeholder": "Fill in the blank...",
          "check_button_text": "Check"
        }
      }
    },
    {
      "name": "LessonComplete",
      "template": "alternative",
      "description": "Lesson completion screen",
      "template_data": {
        "animation": {
          "confetti": true,
          "celebration_sound": "success.mp3"
        },
        "rewards": {
          "show_xp": true,
          "show_streak": true
        }
      }
    }
  ],
  "readme": {
    "title": "Language Learning Template",
    "description": "This template transforms the framework into a Duolingo-like language learning application",
    "installation": [
      "1. Import this file into your application",
      "2. The import will create a new workspace with a complete learning application",
      "3. The application uses IndexedDB to store learning data and track progress"
    ],
    "usage": [
      "This template demonstrates how to use the framework for e-learning applications",
      "The application flow is controlled by context and filter settings",
      "To add more content, add lessons to the IndexedDB collections"
    ],
    "customization": [
      "Modify the app_config collection to change available units",
      "Add more lessons and exercises to the lessons collection",
      "Extend the flow by adding more scenarios for advanced features"
    ]
  }
}