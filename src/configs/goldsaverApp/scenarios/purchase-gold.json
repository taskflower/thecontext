{
    "id": "purchase-gold",
    "slug": "purchase-gold",
    "workspaceSlug": "workspace-goldsaver",
    "name": "Zakup złota",
    "description": "Kupuj złoto jednostkowo lub poprzez zlecenia cykliczne",
    "icon": "credit-card",
    "nodes": [
      {
        "slug": "one-time-purchase",
        "label": "Zakup jednorazowy",
        "tplFile": "FormStep",
        "order": 0,
        "contextSchemaPath": "purchase-form",
        "contextDataPath": "purchase-form",
        "attrs": {
          "title": "Zakup jednostkowy",
          "jsonSchema": {
            "type": "object",
            "properties": {
              "amountGrams": { "type": "number", "title": "Ilość (g)", "minimum": 0.1, "default": 1 },
              "paymentMethod": { "type": "string", "title": "Metoda płatności", "enum": ["Przelew", "BLIK", "Karta"] }
            },
            "required": ["amountGrams", "paymentMethod"]
          },
          "submitLabel": "Oblicz cenę"
        }
      },
      {
        "slug": "price-calculation",
        "label": "Obliczenie ceny",
        "tplFile": "LlmStep",
        "order": 1,
        "contextSchemaPath": "purchase-form",
        "contextDataPath": "purchase-form",
        "attrs": {
          "autoStart": true,
          "userMessage": "Oblicz cenę: {{purchase-form.amountGrams}} g złota po kursie 1 g = 300 PLN. Zwróć JSON z price oraz amountGrams."
        }
      },
      {
        "slug": "payment",
        "label": "Płatność",
        "tplFile": "WidgetsStep",
        "order": 2,
        "contextSchemaPath": "purchase-form",
        "contextDataPath": "purchase-form",
        "attrs": {
          "widgets": [
            { "tplFile": "TitleWidget", "title": "Podsumowanie zakupu", "colSpan": "full" },
            { "tplFile": "InfoWidget", "title": "Ilość (g)", "contextDataPath": "purchase-form.amountGrams", "colSpan": 1 },
            { "tplFile": "InfoWidget", "title": "Do zapłaty (PLN)", "contextDataPath": "purchase-form.price", "colSpan": 1 },
            { "tplFile": "PaymentWidget", "title": "Wybierz metodę płatności", "colSpan": "full" }
          ]
        }
      }
    ]
  }