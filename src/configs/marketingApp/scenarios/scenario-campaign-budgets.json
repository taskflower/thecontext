{
    "id": "scenario-campaign-budgets",
    "slug": "scenario-campaign-budgets",
    "workspaceSlug": "workspace-marketing",
    "name": "Przegląd budżetów kampanii",
    "description": "Pobierz i wyświetl listę zdefiniowanych budżetów kampanii z API",
    "icon": "money",
    "nodes": [
      {
        "slug": "fetch-budgets",
        "label": "Pobieranie budżetów",
        "contextSchemaPath": "campaign-budgets",
        "contextDataPath": "campaign-budgets",
        "tplFile": "WidgetsStep",
        "order": 0,
        "attrs": {
          "title": "Lista budżetów kampanii",
          "subtitle": "Poniżej znajduje się lista wszystkich zdefiniowanych budżetów kampanii",
          "widgets": [
            {
              "tplFile": "TitleWidget",
              "title": "Budżety kampanii Google Ads",
              "subtitle": "Lista wszystkich budżetów zdefiniowanych w systemie",
              "colSpan": "full"
            },
            {
              "tplFile": "WidgetWrapperApi",
              "apiEndpoint": "/api/v1/services/googleads/campaign-budgets",
              "method": "GET",
              "responseTransform": "res => res.budgets.map(budget => ({ id: budget.budgetId, name: budget.name, amount: budget.amount / 1000000, deliveryMethod: budget.deliveryMethod, icon: 'money' }))",
              "transformErrors": "err => `Błąd podczas pobierania budżetów: ${err.message || 'Nieznany błąd'}`",
              "widget": "ListTableWidget",
              "widgetProps": {
                "title": "Zdefiniowane budżety",
                "emptyMessage": "Brak zdefiniowanych budżetów"
              },
              "colSpan": "full"
            },
            {
              "tplFile": "InfoWidget",
              "title": "Informacje o budżetach",
              "data": "Budżety kampanii są współdzielone między różnymi kampaniami. W powyższej tabeli znajdują się wszystkie budżety zdefiniowane w Twoim koncie Google Ads.",
              "icon": "info",
              "colSpan": "full"
            }
          ]
        }
      },
      {
        "slug": "budget-roi-analysis",
        "label": "Analiza ROI budżetów",
        "contextSchemaPath": "campaign-roi",
        "contextDataPath": "campaign-roi",
        "tplFile": "WidgetsStep",
        "order": 1,
        "attrs": {
          "title": "Analiza ROI budżetów kampanii",
          "subtitle": "Analiza zwrotu z inwestycji dla wybranych budżetów",
          "widgets": [
            {
              "tplFile": "ROIWidget",
              "title": "Zwrot z inwestycji",
              "contextDataPath": "campaign-data.roi",
              "colSpan": 1
            },
            {
              "tplFile": "WidgetWrapperApi",
              "apiEndpoint": "/api/v1/services/googleads/campaign-performance",
              "method": "GET",
              "responseTransform": "res => res.campaigns.map(campaign => ({ id: campaign.campaignId, name: campaign.name, budget: campaign.budget, clicks: campaign.metrics.clicks, impressions: campaign.metrics.impressions, conversions: campaign.metrics.conversions, cost: campaign.metrics.cost, icon: 'chart' }))",
              "transformErrors": "err => `Błąd podczas pobierania wyników kampanii: ${err.message || 'Nieznany błąd'}`",
              "widget": "ListTableWidget",
              "widgetProps": {
                "title": "Wyniki kampanii według budżetów",
                "emptyMessage": "Brak danych o wynikach kampanii"
              },
              "colSpan": 2
            }
          ]
        }
      },
      {
        "slug": "create-budget-form",
        "label": "Utwórz nowy budżet",
        "contextSchemaPath": "new-budget",
        "contextDataPath": "new-budget",
        "tplFile": "FormStep",
        "order": 2,
        "attrs": {
          "title": "Utwórz nowy budżet kampanii",
          "description": "Wypełnij formularz, aby utworzyć nowy budżet dla kampanii",
          "jsonSchema": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "title": "Nazwa budżetu",
                "default": "Nowy budżet kampanii"
              },
              "amount": {
                "type": "number",
                "title": "Kwota budżetu (PLN)",
                "minimum": 100,
                "default": 1000
              },
              "deliveryMethod": {
                "type": "string",
                "title": "Metoda dostarczania",
                "enum": [
                  "STANDARD",
                  "ACCELERATED"
                ],
                "default": "STANDARD"
              },
              "explicitlyShared": {
                "type": "boolean",
                "title": "Budżet współdzielony",
                "default": false
              },
              "amountMicros": {
                "type": "number",
                "title": "Kwota w mikrojednostkach (wypełniane automatycznie)"
              }
            },
            "required": [
              "name",
              "amount",
              "deliveryMethod"
            ]
          },
          "submitLabel": "Utwórz budżet",
          "postProcess": {
            "enabled": true,
            "operations": [
              {
                "path": "new-budget.amountMicros",
                "action": "calculate",
                "formula": "new-budget.amount * 1000000"
              }
            ]
          }
        }
      },
      {
        "slug": "create-budget-api",
        "label": "Tworzenie budżetu w Google Ads",
        "contextSchemaPath": "new-budget",
        "contextDataPath": "new-budget",
        "tplFile": "ApiStep",
        "order": 3,
        "attrs": {
          "title": "Tworzenie budżetu w Google Ads",
          "description": "Trwa tworzenie budżetu w systemie Google Ads",
          "apiEndpoint": "/api/v1/services/googleads/campaign-budgets",
          "method": "POST",
          "payloadDataPath": "new-budget"
        }
      },
      {
        "slug": "budget-summary",
        "label": "Podsumowanie",
        "contextSchemaPath": "new-budget",
        "contextDataPath": "new-budget",
        "tplFile": "WidgetsStep",
        "order": 4,
        "attrs": {
          "title": "Podsumowanie utworzonego budżetu",
          "widgets": [
            {
              "tplFile": "InfoWidget",
              "title": "Utworzony budżet",
              "contextDataPath": "new-budget.name",
              "icon": "check",
              "colSpan": 1
            },
            {
              "tplFile": "InfoWidget",
              "title": "Kwota budżetu",
              "contextDataPath": "new-budget.amount",
              "icon": "money",
              "colSpan": 1
            },
            {
              "tplFile": "InfoWidget",
              "title": "ID budżetu",
              "contextDataPath": "new-budget.budgetId",
              "icon": "info",
              "colSpan": 1
            },
            {
              "tplFile": "ErrorWidget",
              "message": "Aby zobaczyć nowo utworzony budżet, wróć do listy budżetów kampanii.",
              "componentName": "BudgetSummary",
              "colSpan": "full"
            }
          ]
        }
      }
    ]
  }