{
  "id":"portfolio",
  "slug":"portfolio",
  "workspaceSlug":"workspace-energygrant",
  "name":"Portfolio",
  "description":"Zarządzaj swoim profilem wykonawcy lub audytora energetycznego",
  "icon":"user",
  "nodes":[
    {
      "slug":"portfolio-type-detector",
      "label":"Wykrywanie typu portfolio",
      "contextSchemaPath":"portfolio",
      "contextDataPath":"portfolio",
      "tplFile":"LlmStep",
      "order":0,
      "attrs":{
        "autoStart":true,
        "userMessage":"Na podstawie roli użytkownika ({{user-data.role}}) określ typ portfolio. Jeśli rola to 'wykonawca', ustaw portfolioType na 'contractor'. Jeśli rola to 'audytor', ustaw portfolioType na 'auditor'. Zwróć JSON z polem portfolioType o wartości 'contractor' lub 'auditor'."
      }
    },
    {
      "slug":"portfolio-data-entry","label":"Krok 1: Dane profilowe","tplFile":"FormStep","order":1,
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "title":"Dane profilowe","description":"Wprowadź dane swojej firmy, które będą widoczne dla beneficjentów",
        "jsonSchema":{"type":"object","properties":{
          "companyName":{"type":"string","title":"Nazwa firmy"},
          "nip":{"type":"string","title":"NIP","pattern":"^[0-9]{10}$"},
          "address":{"type":"string","title":"Adres siedziby"},
          "postalCode":{"type":"string","title":"Kod pocztowy","pattern":"^[0-9]{2}-[0-9]{3}$"},
          "city":{"type":"string","title":"Miejscowość"},
          "phone":{"type":"string","title":"Telefon kontaktowy"},
          "email":{"type":"string","title":"E-mail kontaktowy","format":"email"},
          "website":{"type":"string","title":"Strona internetowa"},
          "description":{"type":"string","title":"Opis działalności","description":"Krótki opis działalności, doświadczenia, specjalizacji"},
          "profileConsent":{"type":"boolean","title":"Potwierdzam, że jestem uprawniony do publikacji tych danych w serwisie oraz wyrażam zgodę na ich przetwarzanie w celu prezentacji profilu firmy","default":false}
        },"required":["companyName","nip","address","postalCode","city","phone","email","profileConsent"]},
        "submitLabel":"Dalej"
      }
    },
    {
      "slug":"portfolio-services","label":"Krok 2: Usługi","tplFile":"FormStep","order":2,
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "title":"Oferowane usługi","description":"Wybierz usługi, które oferuje Twoja firma",
        "jsonSchema":{"type":"object","properties":{
          "services":{"type":"array","title":"Oferowane usługi","items":{"type":"string","enum":["Termomodernizacja ścian","Termomodernizacja dachu","Wymiana okien","Instalacja fotowoltaiki","Wymiana źródła ciepła","Pompy ciepła","Rekuperacja","Audyt energetyczny","Audyt remontowy","Doradztwo energetyczne","Projekty termomodernizacji","Dokumentacja techniczna"]},"uniqueItems":true}
        },"required":["services"]},
        "submitLabel":"Dalej"
      }
    },
    {
      "slug":"portfolio-certificates","label":"Krok 3: Certyfikaty","tplFile":"FormStep","order":3,
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "title":"Certyfikaty i uprawnienia","description":"Wprowadź informacje o posiadanych certyfikatach i uprawnieniach",
        "jsonSchema":{"type":"object","properties":{
          "certificateNumber":{"type":"string","title":"Numer certyfikatu/uprawnień"},
          "certificateExpiry":{"type":"string","title":"Data ważności","format":"date"},
          "certificateConsent":{"type":"boolean","title":"Oświadczam, że posiadam wszystkie wymagane prawem certyfikaty i uprawnienia do wykonywania deklarowanych usług","default":false}
        },"required":["certificateConsent"]},
        "submitLabel":"Dalej"
      }
    },
    {
      "slug":"portfolio-images","label":"Krok 4: Galeria realizacji","tplFile":"WidgetsStep","order":4,
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "widgets":[
          { "tplFile":"TitleWidget","title":"Galeria realizacji","subtitle":"Dodaj zdjęcia swoich realizacji, które pokazują jakość Twojej pracy","colSpan":"full" },
          { "tplFile":"ImageUploaderWidget","title":"Dodaj zdjęcia","contextDataPath":"portfolio.images","colSpan":"full" }
        ]
      }
    },
    {
      "slug":"portfolio-terms-consent","label":"Krok 5: Akceptacja regulaminu","tplFile":"FormStep","order":5,
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "title":"Akceptacja regulaminu","description":"Przed publikacją profilu zapoznaj się z regulaminem serwisu",
        "jsonSchema":{"type":"object","properties":{
          "termsConsent":{"type":"boolean","title":"Oświadczam, że zapoznałem się z regulaminem serwisu i akceptuję jego warunki","default":false},
          "verificationConsent":{"type":"boolean","title":"Wyrażam zgodę na weryfikację podanych danych przez operatora programu","default":false}
        },"required":["termsConsent","verificationConsent"]},
        "submitLabel":"Opublikuj profil"
      }
    },
    {
      "slug":"portfolio-summary","label":"Krok 6: Podsumowanie","tplFile":"WidgetsStep","order":6,
      "saveToDB":{"enabled":true,"provider":"indexedDB","itemType":"portfolio","itemTitle":"Profil firmy","contentPath":"portfolio"},
      "contextSchemaPath":"portfolio","contextDataPath":"portfolio","attrs":{
        "widgets":[
          { "tplFile":"TitleWidget","title":"Podsumowanie profilu","subtitle":"Twój profil jest już widoczny dla beneficjentów po wykupieniu punktów","colSpan":"full" },
          { "tplFile":"PortfolioPreviewWidget","contextDataPath":"portfolio","colSpan":"full" },
          { "tplFile":"InfoWidget","title":"Status","data":"Twój profil został zapisany i będzie widoczny dla beneficjentów po weryfikacji przez operatora.","icon":"info","colSpan":"full" }
        ]
      }
    }
  ]
}