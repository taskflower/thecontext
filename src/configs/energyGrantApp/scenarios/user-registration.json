{
  "id": "user-registration",
  "slug": "user-registration",
  "workspaceSlug": "workspace-user-auth",
  "name": "Rejestracja użytkownika",
  "description": "Zarejestruj się za pomocą konta Google lub formularza",
  "icon": "user-plus",
  "nodes": [
    {
      "slug": "registration-options",
      "label": "Opcje rejestracji",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "FormStep",
      "order": 0,
      "attrs": {}
    },
    {
      "slug": "google-auth-mock",
      "label": "Rejestracja z Google",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "FormStep",
      "order": 1,
      "attrs": {
        "title": "Autoryzacja Google",
        "autoStart": true,
        "userMessage": "Symuluj dane użytkownika otrzymane z Google. Zwróć obiekt JSON z polami: email (losowy email), firstName, lastName (losowe imię i nazwisko). Uwaga: zwróć tylko obiekt JSON bez dodatkowego formatowania czy komentarzy."
      }
    },
    {
      "slug": "role-selection",
      "label": "Wybór roli",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 2,
      "attrs": {
        "title": "Wybierz swoją rolę w systemie",
        "subtitle": "Określ, w jaki sposób chcesz korzystać z programu dotacji energetycznych",
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "{{user-data.firstName}}, wybierz swoją rolę w systemie",
            "subtitle": "Od wybranej roli zależą funkcje dostępne w Twoim panelu użytkownika",
            "colSpan": "full"
          },
          {
            "tplFile": "RoleSelectionWidget",
            "onChange": "role",
            "selectedRole": "{{user-data.role}}",
            "colSpan": "full"
          },
          {
            "tplFile": "InfoWidget",
            "title": "Informacja",
            "data": "Wybór roli możesz zmienić później w ustawieniach konta. Potwierdź wybór, aby przejść dalej.",
            "icon": "info",
            "colSpan": "full",
            "actionText": "Potwierdzam wybór roli",
            "actionUrl": "#legal-info"
          }
        ]
      }
    },
    {
      "slug": "legal-info",
      "label": "Informacje prawne",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 3,
      "attrs": {
        "title": "Informacje prawne",
        "subtitle": "Zapoznaj się z regulaminem i polityką prywatności",
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "Akceptacja warunków",
            "subtitle": "Aby kontynuować, zapoznaj się z regulaminem i polityką prywatności",
            "colSpan": "full"
          },
          {
            "tplFile": "LegalTermsWidget",
            "colSpan": "full"
          },
          {
            "tplFile": "PrivacyPolicyWidget",
            "colSpan": "full"
          }
        ]
      }
    },
    {
      "slug": "registration-consent",
      "label": "Zgody rejestracyjne",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 4,
      "attrs": {
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "Zgody i potwierdzenia",
            "subtitle": "Aby dokończyć rejestrację, potwierdź akceptację warunków",
            "colSpan": "full"
          },
          {
            "tplFile": "ConsentManagementWidget",
            "colSpan": "full"
          }
        ]
      }
    },
    {
      "slug": "registration-complete",
      "label": "Rejestracja zakończona",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "LlmStep",
      "order": 5,
      "attrs": {
        "autoStart": true,
        "userMessage": "Na podstawie danych rejestracyjnych utwórz obiekt użytkownika. Pobierz email, firstName, lastName i role z {{user-data}}. Dodaj pola: points (wartość 100), isLoggedIn (true), lastLoginDate (aktualna data). Zwróć jako czysty obiekt JSON."
      },
      "saveToDB": {
        "enabled": true,
        "provider": "indexedDB",
        "itemType": "user",
        "itemTitle": "Dane użytkownika",
        "contentPath": "user-data"
      }
    },
    {
      "slug": "registration-summary",
      "label": "Podsumowanie rejestracji",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 6,
      "attrs": {
        "title": "Rejestracja zakończona pomyślnie",
        "subtitle": "Twoje konto zostało utworzone",
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "Witaj, {{user-data.firstName}}!",
            "subtitle": "Twoje konto zostało utworzone pomyślnie. Oto podsumowanie:",
            "colSpan": "full"
          },
          {
            "tplFile": "InfoWidget",
            "title": "Adres email",
            "contextDataPath": "user-data.email",
            "icon": "mail",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Imię i nazwisko",
            "data": "{{user-data.firstName}} {{user-data.lastName}}",
            "icon": "user",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Rola w systemie",
            "contextDataPath": "user-data.role",
            "icon": "briefcase",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Punkty startowe",
            "contextDataPath": "user-data.points",
            "icon": "award",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Co dalej?",
            "data": "Możesz teraz przejść do swojego panelu użytkownika i rozpocząć korzystanie z systemu dotacji energetycznych.",
            "icon": "info",
            "colSpan": "full",
            "actionText": "Przejdź do panelu użytkownika",
            "actionUrl": "/dashboard"
          }
        ]
      }
    },
    {
      "slug": "registration-redirect",
      "label": "Przekierowanie do panelu",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "LlmStep",
      "order": 7,
      "attrs": {
        "autoStart": true,
        "userMessage": "Na podstawie roli użytkownika {{user-data.role}} określ ścieżkę przekierowania. Zwróć obiekt JSON z polem redirectUrl, które będzie miało wartość: dla 'beneficjent' - '/workspace-beneficiary', dla 'audytor' - '/workspace-auditor', dla 'wykonawca' - '/workspace-executor', dla 'operator' - '/workspace-operator'."
      }
    },
    {
      "slug": "registration-redirect-action",
      "label": "Wykonanie przekierowania",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "ActionStep",
      "order": 8,
      "attrs": {
        "actionType": "redirect",
        "actionUrl": "{{redirectUrl}}"
      }
    }
  ]
}