{
  "id": "user-registration",
  "slug": "user-registration",
  "workspaceSlug": "workspace-user-auth",
  "name": "Rejestracja użytkownika",
  "description": "Zarejestruj się za pomocą konta Google lub formularza",
  "icon": "user-plus",
  "nodes": [
    {
      "slug": "role-selection",
      "label": "",
      "contextSchemaPath": "user-data.role",
      "contextDataPath": "user-data.role",
      "tplFile": "FormStep",
      "order": 0,
      "attrs": {
        "title": "",
        "description": "",
        "submitLabel": "Wybierz"
      }
    },
    {
      "slug": "login-step",
      "label": "Logowanie",
      "description": "Zaloguj się, aby kontynuować proces",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 1,
      "attrs": {
        "title": "Logowanie do systemu",
        "subtitle": "Zaloguj się, aby kontynuować proces składania wniosku",
        "disableNextButton": true,
        "widgets": [
          {
            "tplFile": "LoginWidget",
            "colSpan": "full",
            "successPath": "workspace-user-auth/user-registration/2"
          }
        ]
      }
    },
    {
      "slug": "legal-info",
      "label": "Informacje prawne",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 2,
      "attrs": {
        "title": "Informacje prawne",
        "subtitle": "Zapoznaj się z regulaminem i polityką prywatności",
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "Akceptacja warunków",
            "subtitle": "Aby kontynuować, zapoznaj się z regulaminem i polityką prywatności",
            "colSpan": "full"
          },
          {
            "tplFile": "LegalTermsWidget",
            "colSpan": "full"
          },
          {
            "tplFile": "PrivacyPolicyWidget",
            "colSpan": "full"
          }
        ]
      }
    },
    {
      "slug": "registration-consent",
      "label": "Zgody rejestracyjne",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "FormStep",
      "order": 3,
      "attrs": {
        "title": "Dane osobowe",
        "description": "Wprowadź swoje imię i nazwisko, aby dokończyć rejestrację",
        "submitLabel": "Zapisz dane",
        "customFields": {
          "firstName": {
            "type": "string",
            "title": "Imię",
            "required": true
          },
          "lastName": {
            "type": "string",
            "title": "Nazwisko",
            "required": true
          }
        }
      }
    },
    {
      "slug": "registration-complete",
      "label": "Rejestracja zakończona",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 5,
      "attrs": {
        "autoStart": true,
        "userMessage": "Na podstawie danych rejestracyjnych utwórz obiekt użytkownika. Pobierz email, firstName, lastName i role z {{user-data}}. Dodaj pola: points (wartość 100), isLoggedIn (true), lastLoginDate (aktualna data). Zwróć jako czysty obiekt JSON."
      },
      "saveToDB": {
        "collection":"user-data",
        "itemId":"{{user-data.id}}",  
        "provider": "indexedDB",
        "contentPath": "user-data"
      }
    },
    {
      "slug": "registration-summary",
      "label": "Podsumowanie rejestracji",
      "contextSchemaPath": "user-data",
      "contextDataPath": "user-data",
      "tplFile": "WidgetsStep",
      "order": 6,
      "attrs": {
        "title": "Rejestracja zakończona pomyślnie",
        "subtitle": "Twoje konto zostało utworzone",
        "widgets": [
          {
            "tplFile": "TitleWidget",
            "title": "Witaj, {{user-data.firstName}}!",
            "subtitle": "Twoje konto zostało utworzone pomyślnie. Oto podsumowanie:",
            "colSpan": "full"
          },
          {
            "tplFile": "InfoWidget",
            "title": "Adres email",
            "contextDataPath": "user-data.email",
            "icon": "mail",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Imię i nazwisko",
            "data": "{{user-data.firstName}} {{user-data.lastName}}",
            "icon": "user",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Rola w systemie",
            "contextDataPath": "user-data.role",
            "icon": "briefcase",
            "colSpan": 1
          },
          {
            "tplFile": "InfoWidget",
            "title": "Punkty startowe",
            "contextDataPath": "user-data.points",
            "icon": "award",
            "colSpan": 1
          }
        ]
      }
    }
  ]
}