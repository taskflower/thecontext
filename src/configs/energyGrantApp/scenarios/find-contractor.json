{
  "id": "find-contractor",
  "slug": "find-contractor",
  "workspaceSlug": "workspace-energygrant",
  "name": "Wyszukiwarka Wykonawców",
  "description": "Formularz zlecenia do publikacji na giełdzie wykonawców",
  "icon": "hammer",
  "nodes": [
    {
      "slug": "contractor-order-form",
      "label": "Krok 1: Formularz zlecenia",
      "contextSchemaPath": "order-request-form-contractor",
      "contextDataPath": "order-request-form-contractor",
      "tplFile": "FormStep",
      "order": 0,
      "attrs": {
        "title": "Formularz zlecenia dla wykonawców",
        "description": "Wypełnij formularz, aby opublikować zlecenie na giełdzie wykonawców",
        "jsonSchema": {
          "type": "object",
          "properties": {
            "address": { "type": "string", "title": "Adres inwestycji" },
            "postalCode": { "type": "string", "title": "Kod pocztowy", "pattern": "^[0-9]{2}-[0-9]{3}$" },
            "city": { "type": "string", "title": "Miejscowość" },
            "phone": { "type": "string", "title": "Telefon kontaktowy" },
            "scope": { "type": "string", "title": "Zakres prac", "enum": ["Termomodernizacja ścian","Termomodernizacja dachu","Wymiana okien","Instalacja fotowoltaiki","Wymiana źródła ciepła","Kompleksowa termomodernizacja","Inne (opisz w uwagach)"] },
            "scopeDescription": { "type": "string", "title": "Dodatkowy opis zakresu prac" },
            "hasAudit": { "type": "boolean", "title": "Czy posiadasz audyt energetyczny?" },
            "auditFile": { "type": "string", "title": "Załącz plik audytu (bez danych osobowych)" },
            "comments": { "type": "string", "title": "Uwagi dodatkowe" },
            "authorized": { "type": "boolean", "title": "Potwierdzam, że jestem uprawniony do przekazania powyższych danych oraz wyrażam zgodę na ich przetwarzanie w celu realizacji zlecenia", "default": false }
          },
          "required": ["address","postalCode","city","phone","scope","hasAudit","authorized"]
        },
        "submitLabel": "Opublikuj zlecenie"
      }
    },
    {
      "slug": "contractor-order-preset",
      "label": "Ustawienie typu zlecenia",
      "contextSchemaPath": "order-request-contractor",
      "contextDataPath": "order-request-contractor",
      "tplFile": "LlmStep",
      "order": 1,
      "attrs": {
        "autoStart": true,
        "showResults": true,
        "title": "Przetwarzanie danych zlecenia",
        "description": "Twoje zlecenie jest przygotowywane do publikacji...",
        "userMessage": "Utwórz obiekt zlecenia z typem \"contractor\" na podstawie danych formularza:\n\n```json\n{{order-request-form-contractor}}\n```\n\nZwróć JSON z poniższymi polami. Po prostu ustaw orderType=\"contractor\" i skopiuj pozostałe wartości z formularza.\n\n- orderType: zawsze \"contractor\"\n- address: skopiuj z formularza\n- postalCode: skopiuj z formularza\n- city: skopiuj z formularza\n- phone: skopiuj z formularza\n- scope: skopiuj z formularza\n- scopeDescription: skopiuj z formularza\n- hasAudit: skopiuj wartość boolean z formularza\n- auditFile: skopiuj z formularza\n- comments: skopiuj z formularza\n\nZwróć tylko czysty JSON, bez komentarzy."
      }
    },
    {
      "slug": "contractor-order-summary",
      "label": "Krok 2: Podsumowanie zlecenia",
      "contextSchemaPath": "order-request-contractor",
      "contextDataPath": "order-request-contractor",
      "tplFile": "WidgetsStep",
      "order": 2,
      "saveToDB": {
        "enabled": true,
        "provider": "indexedDB",
        "itemType": "order",
        "itemTitle": "Zlecenie dla wykonawcy",
        "contentPath": "order-request-contractor"
      },
      "attrs": {
        "widgets": [
          { "tplFile": "TitleWidget", "title": "Zlecenie zostało opublikowane", "subtitle": "Twoje zlecenie jest już widoczne na giełdzie wykonawców. Zainteresowani wykonawcy będą mogli się z Tobą skontaktować.", "colSpan": "full" },
          { "tplFile": "InfoWidget", "title": "Lokalizacja", "contextDataPath": "order-request-contractor.city", "icon": "map-pin", "colSpan": 1 },
          { "tplFile": "InfoWidget", "title": "Zakres prac", "contextDataPath": "order-request-contractor.scope", "icon": "tool", "colSpan": 1 },
          { "tplFile": "InfoWidget", "title": "Audyt energetyczny", "data": "{{order-request-contractor.hasAudit ? 'Załączony' : 'Brak'}}", "icon": "file-text", "colSpan": 1 },
          { "tplFile": "OrderDetailsWidget", "contextDataPath": "order-request-contractor", "colSpan": "full" }
        ]
      }
    }
  ]
}